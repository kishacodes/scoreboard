---
import Layout from '../layouts/Layout.astro';
import ScoreboardFilter from '../components/ScoreboardFilter.astro';
import AdminScoreboardDisplay from '../components/AdminScoreboardDisplay.astro';

// Fetch all games on initial load
const { DB } = Astro.locals.runtime.env;
const { results: games } = await DB.prepare("SELECT * FROM games2025 ORDER BY gameDate ASC").all();
const userEmail = Astro.locals.user?.email ?? null;
---

<Layout title="Scoreboard Admin - Emerson Mavericks Football">
	<main class="container" data-page="admin">
		<h1>Scoreboard Admin</h1>
    <h4 class="welcome-message">Welcome, {userEmail ?? "Guest"}!</h4>
		<ScoreboardFilter />
		<div class="scoreboard-container">
			<AdminScoreboardDisplay games={games} />
		</div>
	</main>
</Layout>


<style>
	.container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 2rem;
	}
	h1 {
		font-size: 2.5rem;
		color: var(--navy-blue);
		text-align: center;
		margin-bottom: 2rem;
	}
  .welcome-message {
    font-size: 1.2rem;
    color: #d32f2f;
    text-align: center;
    margin-bottom: 1.5rem;
    font-weight: 500;
  }
</style>
